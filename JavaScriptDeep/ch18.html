<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CH18</title>
  </head>
  <body>
    <script>
      //자바스크립트는 안기다리고 무시하고 실행 실행 실행 한다. 응답이 먼저 오는게 실행되는 것이다.-> 동기형식 (자바 : 비동기형식 -> 하나 실행하고 완료된 후 그 다음이 실행된다.)

      //자바스크립트에서 제일 어려운 부분

      //promise에서 resolve만 알면 된다.

      //Promise는 new를 이용하여 객체를 만드는 생성자 함수이므로, 대문자로 시작한다.
      //var 변수 = new Promise(function (resolve, reject) { }); 이렇게 쓰면 된다.
      // Promise()는 무조건 return한다.
      // resolve : 잘 마무리 되면 쓰는 함수 resolve (return하고 싶은 값);
      // reject : 에러가 나면 쓰는 함수 - 예외처리

      //자바스크립트에서 통신은 무조건 promise로 감싼다.
      var pro1 = new Promise(function (resolve, reject) {
        setTimeout(function () {
          resolve(100);
        }, 5000);
      });

      pro1.then(function (res) {
        console.log("pro1 : " + res);
      });

      var pro2 = new Promise(function (resolve, reject) {
        setTimeout(function () {
          resolve(2);
          reject(200);
        }, 3000);
      });

      //then(function(parameter) {}); parameter은 resolve의 parameter가 그대로 들어온다.
      //error(function(parameter) {}); parameter은 error의 parameter가 그대로 들어온다.
      //pro2.then(); pro2.catch(); 이렇게 써도 되고 두 개를 연달아 써도 된다.
      //resolve가 promise에서 호출되어야 만 then이 실행되고, reject가 promise에서 호출되어야 만 catch가 실행된다.
      pro2
        .then(function (res) {
          console.log("pro2 : " + res);
        })
        .catch(function (err) {
          console.log("pro2 : " + err);
        });
    </script>
  </body>
</html>
